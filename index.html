<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TruePixel</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #000000;
      color: #e5e7eb;
    }

    header {
      padding: 1.5rem 2rem;
      border-bottom: 1px solid rgba(55, 65, 81, 0.7);
      backdrop-filter: blur(18px);
      background:
        radial-gradient(circle at top left, rgba(250, 204, 21, 0.12), transparent 55%),
        radial-gradient(circle at top right, rgba(236, 72, 153, 0.16), transparent 60%),
        linear-gradient(to right, rgba(10, 10, 10, 0.96), rgba(15, 23, 42, 0.96));
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .brand {
      max-width: 1120px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .brand-title {
      font-size: clamp(1.6rem, 3vw, 2.1rem);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      display: inline-flex;
      gap: 0.35rem;
      align-items: baseline;
    }

    .brand-title-primary {
      color: #facc15;
      text-shadow:
        0 0 6px rgba(250, 204, 21, 0.9),
        0 0 18px rgba(250, 204, 21, 0.9),
        0 0 36px rgba(250, 204, 21, 0.8);
      filter: drop-shadow(0 0 16px rgba(250, 204, 21, 0.75));
    }

    .brand-title-secondary {
      color: #ec4899;
      text-shadow:
        0 0 6px rgba(236, 72, 153, 0.95),
        0 0 20px rgba(236, 72, 153, 0.9),
        0 0 40px rgba(236, 72, 153, 0.85);
      filter: drop-shadow(0 0 18px rgba(236, 72, 153, 0.8));
    }

    .brand-subtitle {
      font-size: 0.9rem;
      color: #9ca3af;
    }

    main {
      flex: 1;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 2rem;
    }

    .app-layout {
      display: flex;
      align-items: stretch;
      justify-content: center;
      gap: 1.75rem;
      width: 100%;
      max-width: 1440px;
    }

    .sidebar {
      width: 220px;
      padding: 1.2rem 1rem;
      border-radius: 1.25rem;
      border: 1px solid rgba(236, 72, 153, 0.35);
      background:
        radial-gradient(circle at top left, rgba(250, 204, 21, 0.12), transparent 55%),
        radial-gradient(circle at bottom right, rgba(236, 72, 153, 0.18), transparent 60%),
        linear-gradient(to bottom, #020617, #020617);
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      box-shadow:
        0 18px 40px rgba(0, 0, 0, 0.9),
        0 0 40px rgba(236, 72, 153, 0.25);
    }

    .sidebar-title {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #9ca3af;
    }

    .sidebar-item {
      border-radius: 0.9rem;
      border: 1px solid transparent;
      padding: 0.5rem 0.8rem;
      font-size: 0.9rem;
      color: #e5e7eb;
      background: transparent;
      text-align: left;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.45rem;
      transition: background-color 0.12s ease-out, border-color 0.12s ease-out, transform 0.12s ease-out;
    }

    .sidebar-item::before {
      content: "";
      width: 0.45rem;
      height: 0.45rem;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.9);
    }

    .sidebar-item:hover {
      background: rgba(15, 23, 42, 0.85);
      border-color: rgba(148, 163, 184, 0.7);
      transform: translateY(-0.5px);
    }

    .sidebar-item.active {
      background: radial-gradient(circle at left, rgba(250, 204, 21, 0.25), rgba(24, 24, 27, 0.95));
      border-color: rgba(236, 72, 153, 0.9);
    }

    .sidebar-item.active::before {
      background: #f97316;
      box-shadow: 0 0 12px rgba(250, 204, 21, 0.8);
    }

    .content {
      flex: 1;
    }

    .sidebar-toggle {
      align-self: flex-start;
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(236, 72, 153, 0.7);
      background: radial-gradient(circle at top, rgba(250, 204, 21, 0.2), #020617);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      margin-top: 0.1rem;
      box-shadow:
        0 12px 26px rgba(0, 0, 0, 0.9),
        0 0 20px rgba(236, 72, 153, 0.4);
      transition: background-color 0.12s ease-out, border-color 0.12s ease-out, transform 0.12s ease-out;
    }

    .sidebar-toggle:hover {
      background: radial-gradient(circle at top, rgba(250, 204, 21, 0.28), #020617);
      border-color: rgba(251, 191, 36, 0.9);
      transform: translateY(-0.5px);
    }

    .sidebar-toggle-icon {
      width: 16px;
      height: 12px;
      position: relative;
    }

    .sidebar-toggle-icon span {
      position: absolute;
      left: 0;
      right: 0;
      height: 2px;
      border-radius: 2px;
      background: #e5e7eb;
    }

    .sidebar-toggle-icon span:nth-child(1) {
      top: 0;
    }

    .sidebar-toggle-icon span:nth-child(2) {
      top: 5px;
    }

    .sidebar-toggle-icon span:nth-child(3) {
      top: 10px;
    }

    .shell {
      width: 100%;
      max-width: 1280px;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.2fr);
      gap: 1.75rem;
      align-items: stretch;
    }

    .panel {
      background:
        radial-gradient(circle at top left, rgba(250, 204, 21, 0.12), transparent 55%),
        radial-gradient(circle at bottom right, rgba(236, 72, 153, 0.18), transparent 60%),
        linear-gradient(to bottom right, #020617, #020617);
      border-radius: 1.25rem;
      border: 1px solid rgba(236, 72, 153, 0.45);
      padding: 1.4rem 1.4rem 1.7rem;
      display: flex;
      flex-direction: column;
      min-height: 650px;
      box-shadow:
        0 30px 80px rgba(0, 0, 0, 0.95),
        0 0 40px rgba(236, 72, 153, 0.32);
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
      gap: 0.75rem;
    }

    .panel-title {
      font-size: 0.95rem;
      font-weight: 600;
      color: #e5e7eb;
    }

    .panel-tag {
      padding: 0.15rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(236, 72, 153, 0.8);
      font-size: 0.68rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #f9a8d4;
      background: linear-gradient(to right, rgba(30, 64, 175, 0.95), rgba(76, 29, 149, 0.95));
      box-shadow: 0 0 18px rgba(236, 72, 153, 0.7);
    }

    .prompt-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .prompt-input {
      flex: 1;
      resize: none;
      border-radius: 0.9rem;
      border: 1px solid rgba(148, 163, 184, 0.5);
      padding: 0.85rem 1rem;
      font-size: 0.95rem;
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.9);
      outline: none;
      box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.8);
    }

    .prompt-input::placeholder {
      color: #6b7280;
    }

    .prompt-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .preset-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
    }

    .preset {
      font-size: 0.7rem;
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.9);
      color: #9ca3af;
      cursor: pointer;
      transition: all 0.15s ease-out;
      white-space: nowrap;
    }

    .preset:hover {
      border-color: rgba(96, 165, 250, 0.9);
      color: #e5e7eb;
    }

    .actions {
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }

    .hint {
      font-size: 0.7rem;
      color: #9ca3af;
    }

    .button-primary {
      border-radius: 999px;
      border: none;
      padding: 0.55rem 1.2rem;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      color: #020617;
      background: linear-gradient(135deg, #f97316, #facc15);
      box-shadow: 0 16px 32px rgba(248, 250, 252, 0.12);
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out, filter 0.12s ease-out;
    }

    .button-primary:hover {
      transform: translateY(-1px);
      filter: brightness(1.02);
      box-shadow: 0 20px 40px rgba(248, 250, 252, 0.18);
    }

    .button-primary:active {
      transform: translateY(0);
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.8);
    }

    .button-primary:disabled {
      cursor: not-allowed;
      filter: grayscale(0.3) brightness(0.9);
      box-shadow: none;
    }

    .icon-sparkle {
      width: 1rem;
      height: 1rem;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0, #f97316, #facc15);
      box-shadow: 0 0 0 1px rgba(248, 250, 252, 0.6);
    }

    .preview-shell {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .preview-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.75rem;
      color: #9ca3af;
    }

    .preview-frame {
      position: relative;
      flex: 1;
      border-radius: 1rem;
      overflow: hidden;
      border: 1px solid rgba(251, 191, 36, 0.65);
      background:
        radial-gradient(circle at top left, rgba(250, 204, 21, 0.14), transparent 55%),
        radial-gradient(circle at bottom right, rgba(236, 72, 153, 0.22), #020617);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow:
        0 24px 60px rgba(0, 0, 0, 0.95),
        0 0 32px rgba(236, 72, 153, 0.45);
    }

    .preview-actions {
      display: flex;
      justify-content: flex-end;
      gap: 0.6rem;
      margin-top: 0.4rem;
    }

    .preview-image {
      max-width: 100%;
      max-height: 100%;
      object-fit: cover;
      display: block;
    }

    .preview-empty {
      text-align: center;
      padding: 1.5rem;
      color: #9ca3af;
      font-size: 0.9rem;
    }

    .preview-prompt {
      position: absolute;
      left: 0.9rem;
      bottom: 0.9rem;
      max-width: 70%;
      padding: 0.45rem 0.75rem;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.82);
      border: 1px solid rgba(148, 163, 184, 0.7);
      font-size: 0.72rem;
      color: #e5e7eb;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 0.14s ease-out, transform 0.14s ease-out;
    }

    .preview-prompt.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .status-dot {
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 999px;
      background: #4ade80;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.12);
      margin-right: 0.35rem;
    }

    .button-secondary {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 0.45rem 1.1rem;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.9);
      transition: background-color 0.12s ease-out, border-color 0.12s ease-out, transform 0.12s ease-out;
    }

    .button-secondary:hover:not(:disabled) {
      background: rgba(30, 64, 175, 0.9);
      border-color: rgba(129, 140, 248, 0.9);
      transform: translateY(-0.5px);
    }

    .button-secondary:disabled {
      cursor: not-allowed;
      opacity: 0.5;
      transform: none;
    }

    .paste-zone {
      flex: 1;
      border-radius: 1rem;
      border: 1px dashed rgba(251, 191, 36, 0.85);
      background:
        radial-gradient(circle at top, rgba(250, 204, 21, 0.12), transparent 60%),
        linear-gradient(to bottom, #020617, #020617);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      outline: none;
      cursor: text;
    }

    .paste-zone:focus {
      border-color: rgba(236, 72, 153, 0.95);
      box-shadow: 0 0 0 1px rgba(236, 72, 153, 0.9), 0 0 28px rgba(236, 72, 153, 0.65);
    }

    .paste-zone-placeholder {
      font-size: 0.85rem;
      color: #9ca3af;
      text-align: center;
    }

    .pasted-image {
      max-width: 100%;
      max-height: 100%;
      border-radius: 0.8rem;
      object-fit: contain;
    }

    footer {
      padding: 0.9rem 2rem 1.4rem;
      font-size: 0.75rem;
      color: #6b7280;
      text-align: center;
    }

    .about-content {
      flex: 1;
      overflow-y: auto;
      padding: 0.5rem;
      font-size: 0.95rem;
      line-height: 1.6;
      color: #d1d5db;
    }

    .about-content p {
      margin-bottom: 1rem;
    }

    .about-content p:last-child {
      margin-bottom: 0;
    }

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 40;
    }

    .modal-panel {
      width: 100%;
      max-width: 520px;
      border-radius: 1.25rem;
      border: 1px solid rgba(236, 72, 153, 0.7);
      padding: 1.4rem 1.6rem 1.6rem;
      background:
        radial-gradient(circle at top left, rgba(250, 204, 21, 0.12), transparent 55%),
        radial-gradient(circle at bottom right, rgba(236, 72, 153, 0.18), transparent 60%),
        linear-gradient(to bottom right, #020617, #020617);
      box-shadow:
        0 28px 70px rgba(0, 0, 0, 0.95),
        0 0 40px rgba(236, 72, 153, 0.42);
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
    }

    .modal-title {
      font-size: 0.95rem;
      font-weight: 600;
      color: #e5e7eb;
    }

    .modal-close {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      color: #9ca3af;
      width: 28px;
      height: 28px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      cursor: pointer;
    }

    .modal-body {
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
      font-size: 0.85rem;
      color: #d1d5db;
    }

    .detail-label {
      color: #9ca3af;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .detail-value {
      word-break: break-all;
    }

    @media (max-width: 900px) {
      main {
        padding: 1.5rem 1.25rem;
      }

      .app-layout {
        flex-direction: column;
        max-width: 100%;
      }

      .shell {
        grid-template-columns: minmax(0, 1fr);
        max-width: 100%;
      }

      .panel {
        min-height: 0;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useCallback, useState, useRef } = React;

    function pickDemoImage(text) {
      const themes = [
        {
          key: "city",
          url: "https://images.pexels.com/photos/316093/pexels-photo-316093.jpeg?auto=compress&cs=tinysrgb&w=1200"
        },
        {
          key: "astronaut",
          url: "https://images.pexels.com/photos/847196/pexels-photo-847196.jpeg?auto=compress&cs=tinysrgb&w=1200"
        },
        {
          key: "island",
          url: "https://images.pexels.com/photos/247478/pexels-photo-247478.jpeg?auto=compress&cs=tinysrgb&w=1200"
        },
        {
          key: "default",
          url: "https://images.pexels.com/photos/799443/pexels-photo-799443.jpeg?auto=compress&cs=tinysrgb&w=1200"
        }
      ];

      const lower = text.toLowerCase();

      if (lower.includes("city") || lower.includes("neon")) return themes[0].url;
      if (lower.includes("astronaut") || lower.includes("space") || lower.includes("nebula")) return themes[1].url;
      if (lower.includes("island") || lower.includes("ocean")) return themes[2].url;
      return themes[3].url;
    }

    function TruePixelApp() {
      const [activePage, setActivePage] = useState("home");
      const [sidebarOpen, setSidebarOpen] = useState(false);
      const [prompt, setPrompt] = useState("");
      const [imageUrl, setImageUrl] = useState("");
      const [previewPrompt, setPreviewPrompt] = useState("");
      const [pastedImageUrl, setPastedImageUrl] = useState("");
      const [isGenerating, setIsGenerating] = useState(false);
      const [loadingText, setLoadingText] = useState("Generating");
      const [generationError, setGenerationError] = useState("");
      const [pastedImageFile, setPastedImageFile] = useState(null);
      const loadingIntervalRef = useRef(null);
      const [validateLoading, setValidateLoading] = useState(false);
      const [validateResult, setValidateResult] = useState(null);
      const [validateError, setValidateError] = useState("");
      const [showValidateDetails, setShowValidateDetails] = useState(false);
      const fileInputRef = useRef(null);

      const hasImage = Boolean(imageUrl);
      const hasPastedImage = Boolean(pastedImageUrl);

      const applyPrompt = useCallback(async (rawPrompt) => {
        const trimmed = rawPrompt.trim();

        if (!trimmed || isGenerating) {
          return;
        }

        setGenerationError("");
        setIsGenerating(true);

        try {
          const response = await fetch("https://c83d12c81249.ngrok-free.app/generate", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ prompt: trimmed })
          });

          if (!response.ok) {
            let message = "Failed to generate image.";

            try {
              const data = await response.json();
              if (data && data.error) {
                message = data.error;
              }
            } catch (parseError) {
            }

            setImageUrl("");
            setPreviewPrompt("");
            setGenerationError(message);
            return;
          }

          const payload = await response.json();

          if (!payload || !payload.success || !payload.data || !payload.data.image_base64) {
            setImageUrl("");
            setPreviewPrompt("");
            setGenerationError("Unexpected response from server.");
            return;
          }

          const imageBase64 = payload.data.image_base64;
          const url = "data:image/png;base64," + imageBase64;

          setImageUrl(url);
          setPreviewPrompt(trimmed);
        } catch (error) {
          setImageUrl("");
          setPreviewPrompt("");
          setGenerationError("Network error while generating image.");
        } finally {
          setIsGenerating(false);
        }
      }, [isGenerating]);

      const handleGenerate = useCallback(() => {
        applyPrompt(prompt);
      }, [applyPrompt, prompt]);

      const handleKeyDown = useCallback((event) => {
        if (event.key === "Enter" && (event.metaKey || event.ctrlKey)) {
          event.preventDefault();
          handleGenerate();
        }
      }, [handleGenerate]);

      const handlePresetClick = useCallback((text) => {
        setPrompt(text);
        applyPrompt(text);
      }, [applyPrompt]);

      const handleCopy = useCallback(async () => {
        if (!imageUrl || !navigator.clipboard || !window.ClipboardItem) {
          return;
        }
        try {
          const response = await fetch(imageUrl);
          const blob = await response.blob();
          const item = new ClipboardItem({ [blob.type]: blob });
          await navigator.clipboard.write([item]);
        } catch (error) {
        }
      }, [imageUrl]);

      const handleDownload = useCallback(() => {
        if (!imageUrl) {
          return;
        }
        const link = document.createElement("a");
        link.href = imageUrl;
        link.download = "truepixel-image.jpg";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }, [imageUrl]);

      const handlePasteImage = useCallback((event) => {
        if (!event.clipboardData) {
          return;
        }
        const items = event.clipboardData.items;
        for (let index = 0; index < items.length; index += 1) {
          const item = items[index];
          if (item.type && item.type.startsWith("image/")) {
            const file = item.getAsFile();
            if (!file) {
              continue;
            }
            const url = URL.createObjectURL(file);
            setPastedImageUrl(url);
            setPastedImageFile(file);
            setValidateResult(null);
            setValidateError("");
            break;
          }
        }
      }, []);

      const handleValidate = useCallback(async () => {
        if (!pastedImageFile || validateLoading) {
          return;
        }

        setValidateError("");
        setValidateResult(null);
        setShowValidateDetails(false);
        setValidateLoading(true);

        try {
          const formData = new FormData();
          formData.append("image", pastedImageFile);

          const response = await fetch("https://c83d12c81249.ngrok-free.app/verify", {
            method: "POST",
            body: formData
          });

          if (!response.ok) {
            let message = "Failed to verify image.";

            try {
              const data = await response.json();
              if (data && data.error) {
                message = data.error;
              }
            } catch (parseError) {
            }

            setValidateError(message);
            return;
          }

          const payload = await response.json();

          if (!payload) {
            setValidateError("Unexpected response from server.");
            return;
          }

          if (!payload.success) {
            setValidateError("This image cannot be verified.");
            return;
          }

          if (!payload.data) {
            setValidateError("Unexpected response from server.");
            return;
          }

          setValidateResult(payload.data);
        } catch (error) {
          setValidateError("Network error while verifying image.");
        } finally {
          setValidateLoading(false);
        }
      }, [pastedImageFile, validateLoading]);

      const handleBrowseClick = useCallback(() => {
        if (fileInputRef.current) {
          fileInputRef.current.click();
        }
      }, []);

      const handleFileChange = useCallback((event) => {
        const fileList = event.target.files;
        if (!fileList || fileList.length === 0) {
          return;
        }
        const file = fileList[0];
        if (!file.type || (file.type !== "image/png" && file.type !== "image/jpeg")) {
          event.target.value = "";
          return;
        }
        const url = URL.createObjectURL(file);
        setPastedImageUrl(url);
        setPastedImageFile(file);
        setValidateResult(null);
        setValidateError("");
      }, []);

      const toggleSidebar = useCallback(() => {
        setSidebarOpen((open) => !open);
      }, []);

      return (
        <>
          <header>
            <div className="brand">
              <div>
                <div className="brand-title">
                  <span className="brand-title-primary">True</span>
                  <span className="brand-title-secondary">Pixel</span>
                </div>
                <div className="brand-subtitle">If It’s AI, You’ll Know.</div>
              </div>
              <div className="hint"></div>
            </div>
          </header>

          <main>
            <div className="app-layout">
              <button
                type="button"
                className="sidebar-toggle"
                onClick={toggleSidebar}
                aria-label="Toggle navigation"
              >
                <div className="sidebar-toggle-icon">
                  <span />
                  <span />
                  <span />
                </div>
              </button>

              {sidebarOpen && (
                <aside className="sidebar">
                  <div className="sidebar-title">Navigation</div>
                  <button
                    type="button"
                    className={`sidebar-item${activePage === "home" ? " active" : ""}`}
                    onClick={() => setActivePage("home")}
                  >
                    Home
                  </button>
                  <button
                    type="button"
                    className={`sidebar-item${activePage === "validate" ? " active" : ""}`}
                    onClick={() => setActivePage("validate")}
                  >
                    Validate
                  </button>
                  <button
                    type="button"
                    className={`sidebar-item${activePage === "about" ? " active" : ""}`}
                    onClick={() => setActivePage("about")}
                  >
                    What we do
                  </button>
                </aside>
              )}

              <section className="content">
                {activePage === "home" && (
                  <section className="shell">
                    <section className="panel">
                      <div className="panel-header">
                        <div className="panel-title">Prompt</div>
                        <div className="panel-tag">Input</div>
                      </div>

                      <div className="prompt-area">
                        <textarea
                          className="prompt-input"
                          rows={5}
                          placeholder="e.g. A futuristic neon cityscape at night reflected on wet pavement, ultra detailed, cinematic lighting."
                          value={prompt}
                          onChange={(event) => setPrompt(event.target.value)}
                          onKeyDown={handleKeyDown}
                        />

                        <div className="prompt-footer">
                          <div className="preset-row">
                            <button
                              type="button"
                              className="preset"
                              onClick={() =>
                                handlePresetClick(
                                  "A cozy reading nook with warm sunlight and floating dust particles, studio photo."
                                )
                              }
                            >
                              Cozy nook
                            </button>
                            <button
                              type="button"
                              className="preset"
                              onClick={() =>
                                handlePresetClick(
                                  "Hyper-realistic portrait of an astronaut in a reflective helmet, colorful nebula in the visor."
                                )
                              }
                            >
                              Astronaut portrait
                            </button>
                            <button
                              type="button"
                              className="preset"
                              onClick={() =>
                                handlePresetClick(
                                  "Isometric illustration of a tiny island city with glowing windows at dusk."
                                )
                              }
                            >
                              Island city
                            </button>
                          </div>

                          <div className="actions">
                            <span className="hint">Press Enter + ⌘ / Ctrl to generate</span>
                            <button
                              className="button-primary"
                              type="button"
                              onClick={handleGenerate}
                              disabled={isGenerating || !prompt.trim()}
                            >
                              <span className="icon-sparkle" aria-hidden="true" />
                              <span>{isGenerating ? "Generating..." : "Generate"}</span>
                            </button>
                          </div>
                        </div>
                      </div>
                    </section>

                    <section className="panel">
                      <div className="panel-header">
                        <div className="panel-title">Output</div>
                        <div className="panel-tag">Preview</div>
                      </div>

                      <div className="preview-shell">
                        <div className="preview-meta">
                          <div>
                            <span className="status-dot" />
                            Ready for your next idea
                          </div>
                          <div>Resolution: 1024 × 1024</div>
                        </div>

                        <div className="preview-frame">
                          {isGenerating ? (
                            <div style={{ display: "flex", flexDirection: "column", alignItems: "center", gap: "1rem", color: "#9ca3af" }}>
                              <div className="icon-sparkle" style={{ width: "2rem", height: "2rem" }} />
                              <div style={{ fontSize: "1.1rem", fontWeight: 500 }}>{loadingText}</div>
                            </div>
                          ) : hasImage ? (
                            <>
                              <img className="preview-image" alt="Generated preview" src={imageUrl} />
                              <div className="preview-prompt visible">{previewPrompt}</div>
                            </>
                          ) : (
                            <div className="preview-empty">
                              {generationError || (
                                <>
                                  Your generated image will appear here.
                                  <br />
                                  Start with a descriptive prompt on the left.
                                </>
                              )}
                            </div>
                          )}
                        </div>

                        <div className="preview-actions">
                          <button
                            type="button"
                            className="button-secondary"
                            disabled={!hasImage}
                            onClick={handleCopy}
                          >
                            Copy
                          </button>
                          <button
                            type="button"
                            className="button-secondary"
                            disabled={!hasImage}
                            onClick={handleDownload}
                          >
                            Download
                          </button>
                        </div>
                      </div>
                    </section>
                  </section>
                )}

                {activePage === "validate" && (
                  <section className="shell">
                    <section className="panel">
                      <div className="panel-header">
                        <div className="panel-title">Paste image window</div>
                        <div className="panel-tag">Validate</div>
                      </div>

                      <div className="prompt-area">
                        <div
                          className="paste-zone"
                          tabIndex={0}
                          onPaste={handlePasteImage}
                        >
                          {hasPastedImage ? (
                            <img
                              src={pastedImageUrl}
                              alt="Pasted for validation"
                              className="pasted-image"
                            />
                          ) : (
                            <div className="paste-zone-placeholder">
                              Click here and press ⌘ / Ctrl + V to paste an image from your clipboard.
                            </div>
                          )}
                        </div>

                        <div className="prompt-footer">
                          <div className="actions">
                            <button
                              type="button"
                              className="button-secondary"
                              onClick={handleBrowseClick}
                            >
                              Browse image
                            </button>
                            <input
                              type="file"
                              accept="image/png,image/jpeg,image/jpg"
                              ref={fileInputRef}
                              style={{ display: "none" }}
                              onChange={handleFileChange}
                            />
                            <button
                              type="button"
                              className="button-primary"
                              disabled={!hasPastedImage}
                              onClick={handleValidate}
                            >
                              <span className="icon-sparkle" aria-hidden="true" />
                              <span>Validate</span>
                            </button>
                          </div>
                        </div>
                      </div>
                    </section>

                    <section className="panel">
                      <div className="panel-header">
                        <div className="panel-title">Validation output</div>
                        <div className="panel-tag">Backend</div>
                      </div>

                      <div className="preview-shell">
                        <div className="preview-frame">
                          <div className="preview-empty">
                            {validateLoading ? (
                              "Validating image..."
                            ) : validateError ? (
                              validateError
                            ) : validateResult ? (
                              <div>
                                {validateResult.is_verified
                                  ? "This image is AI generated."
                                  : "This image cannot be verified."}
                              </div>
                            ) : (
                              "Press validate to check if image is AI-generated."
                            )}
                          </div>
                        </div>
                        {validateResult && validateResult.is_verified && !validateLoading && !validateError && (
                          <div className="preview-actions">
                            <button
                              type="button"
                              className="button-secondary"
                              onClick={() => setShowValidateDetails(true)}
                            >
                              View Details
                            </button>
                          </div>
                        )}
                      </div>
                    </section>
                  </section>
                )}

                {activePage === "about" && (
                  <section className="shell" style={{ gridTemplateColumns: "1fr" }}>
                    <section className="panel">
                      <div className="panel-header">
                        <div className="panel-title">What we do</div>
                        <div className="panel-tag">Mission</div>
                      </div>
                      <div className="about-content">
                        <p>Restoring Trust in the Age of AI</p>
                        <p>AI-generated images are becoming indistinguishable from real photographs. While this technology enables creativity, it has also created a dangerous gap in trust. Images can now be fabricated and shared at scale, often using real people’s likenesses without their consent. Victims of these fake images face reputational damage, emotional harm, and public scrutiny, with no reliable way to prove the truth.</p>
                        <p>The internet today lacks a simple answer to a critical question: Is this image real, or was it generated by AI?</p>
                        <p>TruePixel exists to solve this problem using blockchain technology.</p>
                        <p>Our mission is to protect individual privacy and restore confidence in digital media by making the origin of AI-generated images permanently verifiable on chain. Our long-term goal is for all AI image generation platforms including ChatGPT, Gemini, Midjourney, and others to integrate blockchain based provenance by default, ensuring AI generated content can be identified before it harms someone’s reputation or safety.</p>
                        <p>Our solution creates a “digital passport” for AI generated images. When an image is created, it is assigned a unique digital fingerprint and recorded on an immutable blockchain ledger. This blockchain record acts as a public, tamper proof source of truth that cannot be altered or erased. The image itself is never stored on chain, preserving privacy while ensuring accountability.</p>
                        <p>Anyone can later verify an image by checking its fingerprint against the blockchain. If a match exists, the image can be definitively identified as AI-generated.</p>
                        <p>By anchoring content provenance to the blockchain, TruePixel provides victims with objective proof, deters misuse of generative AI, and establishes a trusted foundation for the future of digital media.</p>
                        <p>TruePixel is a step toward a safer, more accountable internet.</p>
                      </div>
                    </section>
                  </section>
                )}
              </section>
            </div>
          </main>

          {showValidateDetails && validateResult && validateResult.is_verified && (
            <div className="modal-backdrop">
              <div className="modal-panel">
                <div className="modal-header">
                  <div className="modal-title">Verification details</div>
                  <button
                    type="button"
                    className="modal-close"
                    onClick={() => setShowValidateDetails(false)}
                  >
                    ×
                  </button>
                </div>
                <div className="modal-body">
                  <div>
                    <div className="detail-label">Status</div>
                    <div className="detail-value">AI generated</div>
                  </div>
                  <div>
                    <div className="detail-label">Image hash</div>
                    <div className="detail-value">{validateResult.image_hash}</div>
                  </div>
                  <div>
                    <div className="detail-label">Provider</div>
                    <div className="detail-value">{validateResult.provider}</div>
                  </div>
                  <div>
                    <div className="detail-label">Model</div>
                    <div className="detail-value">{validateResult.model_id}</div>
                  </div>
                  <div>
                    <div className="detail-label">Timestamp</div>
                    <div className="detail-value">{validateResult.timestamp}</div>
                  </div>
                </div>
              </div>
            </div>
          )}


        </>
      );
    }

    const container = document.getElementById("root");
    const root = ReactDOM.createRoot(container);
    root.render(<TruePixelApp />);
  </script>
</body>
</html>
